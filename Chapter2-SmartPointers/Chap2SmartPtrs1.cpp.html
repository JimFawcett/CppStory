<pre>// Chap2SmartPtrs.cpp

#include &lt;memory&gt;
#include &lt;string&gt;
#include &lt;iostream&gt;
#include "../Chapter7-Display/Chap7Display.h"

std::string displayHelper(
  const std::string&amp; str
) 
{
  std::string insert = 
    (str.size() &gt; 0 ? " " + str + " " : " ");
  return insert;
}
/*-- interface for Widget class --*/

struct IWidget {
  virtual ~IWidget() {}
  virtual void say() = 0;
  virtual std::string name() = 0;
  virtual void name(const std::string&amp; nm) = 0;
};
/*-- Widget class --*/

class Widget : public IWidget {
public:
  Widget() = default;
  Widget(const std::string&amp; nm) {
    name_ = nm;
  }
  ~Widget() {
    std::cout &lt;&lt; "\n  destroying "
              &lt;&lt; displayHelper(name_);
  }
  virtual void say() override {
    std::cout &lt;&lt; "\n  Widget instance" 
              &lt;&lt; displayHelper(name_) 
              &lt;&lt; "here";
    std::cout &lt;&lt; "\n  my address is " 
              &lt;&lt; reinterpret_cast&lt;long long&gt;(this);
  }
  virtual std::string name() override {
    return name_;
  }
  virtual void name(const std::string&amp; nm) {
    name_ = nm;
  }
private:
  std::string name_;
};
/*-------------------------------------------
  first factory function uses unique_ptr
*/

std::unique_ptr&lt;IWidget&gt; createWidget1() {
  return std::unique_ptr&lt;Widget&gt;(new Widget);
}
/*--------------------------------------------
  second factory function uses make_unique
*/

std::unique_ptr&lt;IWidget&gt; createWidget2() {
  return std::make_unique&lt;Widget&gt;();
}
/*-------------------------------------------
  third factory function uses initialized
  make_unique
*/
std::unique_ptr&lt;IWidget&gt;
createWidget3(const std::string&amp; name) {
  return std::make_unique&lt;Widget&gt;(
    Widget(name)
    );
}

/*-------------------------------------------
  fourth factory function uses static Widget
  for make_unique avoiding repeated constr.
*/
std::unique_ptr&lt;IWidget&gt;
createWidget4(const std::string&amp; name) {
  static Widget widget;
  widget.name(name);
  return std::make_unique&lt;Widget&gt;(
    widget
  );
}

int main() {

  displayTitle("Demonstrating Smart Pointers");

  displayDemo(
    "--- createWidget1 with std::unique_ptr ---"
  );
  std::unique_ptr&lt;IWidget&gt; pWidget = 
    createWidget1();
  pWidget-&gt;say();
  pWidget-&gt;name("Joe");
  pWidget-&gt;say();
  putline();

  displayDemo(
    "--- createWidget2 with std::make_unique ---"
  );
  pWidget = createWidget2();
  pWidget-&gt;name("Zhang");
  pWidget-&gt;say();
  putline();

  displayDemo(
    "--- createWidget3 with initialized "
    "std::make_unique ---"
  );
  pWidget = createWidget3("Ashok");
  pWidget-&gt;say();
  putline();

  displayDemo(
    "--- createWidget4 with "
    "static initialized "
    "std::make_unique ---"
  );
  pWidget = createWidget4("Priyaa");
  pWidget-&gt;say();
  putline();

  displayDemo(
    "--- std::shared_ptr ---"
  );
  std::shared_ptr&lt;IWidget&gt; pS1Widget = 
    std::make_shared&lt;Widget&gt;(Widget("Mike"));
  pS1Widget-&gt;say();
  std::shared_ptr&lt;IWidget&gt; 
  pS2Widget = pS1Widget;
  pS2Widget-&gt;say();
  putline();

  displayDemo(
    "--- std::shared_ptr via factory---"
  );
  std::shared_ptr&lt;IWidget&gt;
  pS3Widget = createWidget4("Sally");
  pS3Widget-&gt;say();
  std::shared_ptr&lt;IWidget&gt;
  pS4Widget = pS3Widget;
  pS4Widget-&gt;say();
  putline();
}</pre>